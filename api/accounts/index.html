<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.91.2">
<meta name=description content>
<link rel=icon href=/pirate-btcpay/images/favicon.png type=image/png>
<title>Accounts :: Pirate BTCPay Server</title>
<link href=/pirate-btcpay/css/nucleus.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/fontawesome-all.min.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/hybrid.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/featherlight.min.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/perfect-scrollbar.min.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/auto-complete.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/atom-one-dark-reasonable.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/theme.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/tabs.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/hugo-theme.css?1655562048 rel=stylesheet>
<link href=/pirate-btcpay/css/theme-blue.css?1655562048 rel=stylesheet>
<script src=/pirate-btcpay/js/jquery-3.3.1.min.js?1655562048></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
</head>
<body data-url=/pirate-btcpay/api/accounts/>
<nav id=sidebar class=showVisitedLinks>
<div id=header-wrapper>
<div id=header>
<a id=logo href=https://hhanh01.github.io/pirate-btcpay/>
<img srcset="https://hhanh01.github.io/pirate-btcpay//logo.png 6x">
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/pirate-btcpay/js/lunr.min.js?1655562048></script>
<script type=text/javascript src=/pirate-btcpay/js/auto-complete.js?1655562048></script>
<script type=text/javascript>var baseurl="https://hhanh01.github.io/pirate-btcpay/"</script>
<script type=text/javascript src=/pirate-btcpay/js/search.js?1655562048></script>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/pirate-btcpay/installation/ title=Installation class=dd-item>
<a href=/pirate-btcpay/installation/>
<b>1. </b>Installation
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/pirate-btcpay/installation/requirements/ title=Requirements class=dd-item>
<a href=/pirate-btcpay/installation/requirements/>
Requirements
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/pirate-btcpay/installation/build/ title=Build class=dd-item>
<a href=/pirate-btcpay/installation/build/>
Build
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/pirate-btcpay/installation/usage/ title=Usage class=dd-item>
<a href=/pirate-btcpay/installation/usage/>
Usage
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/pirate-btcpay/api/ title=API class="dd-item
parent">
<a href=/pirate-btcpay/api/>
<b>2. </b>API
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/pirate-btcpay/api/accounts/ title=Accounts class="dd-item active">
<a href=/pirate-btcpay/api/accounts/>
Accounts
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/pirate-btcpay/api/status/ title="Server Status" class=dd-item>
<a href=/pirate-btcpay/api/status/>
Server Status
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/pirate-btcpay/api/scan/ title=Scan class=dd-item>
<a href=/pirate-btcpay/api/scan/>
Scan
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/pirate-btcpay/api/payment/ title=Payment class=dd-item>
<a href=/pirate-btcpay/api/payment/>
Payment
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
</ul>
<section id=prefooter>
<hr>
<ul>
<li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li>
</ul>
</section>
<section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<a href=/pirate-btcpay/>BTCPay Server</a> > <a href=/pirate-btcpay/api/>API</a> > Accounts
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#create-a-new-account>Create a new account</a></li>
<li><a href=#create-a-new-sub-address>Create a new sub address</a></li>
<li><a href=#list-all-accounts-and-balances>List all accounts and balances</a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
Accounts
</h1>
<h2 id=create-a-new-account>Create a new account</h2>
<p>Create a new account and return its index and first address</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#34;should allow creating new accounts&#34;</span>, <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> () {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>rep</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>chakram</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;http://localhost:8000/create_account&#39;</span>, {})
    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>rep</span>).<span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>have</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>200</span>)
    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>rep</span>.<span style=color:#a6e22e>body</span>).<span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>deep</span>.<span style=color:#a6e22e>equal</span>({
        <span style=color:#a6e22e>account_index</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
        <span style=color:#a6e22e>address</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;zs1xflcmxuagwwn969htsej4mn3nuk7e3eeu3en4n4hkxajnqgmx5jsw0sa4p0r2ymqewf2ufefkfm&#34;</span>
    })
})
</code></pre></div><h2 id=create-a-new-sub-address>Create a new sub address</h2>
<p>Create a new diversified address for the given account</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#34;should allow creating new address&#34;</span>, <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> () {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>rep</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>chakram</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;http://localhost:8000/create_address&#39;</span>, {
        <span style=color:#a6e22e>account_index</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>
    })
    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>rep</span>).<span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>have</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>200</span>)
    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>rep</span>.<span style=color:#a6e22e>body</span>).<span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>deep</span>.<span style=color:#a6e22e>equal</span>({
        <span style=color:#a6e22e>address</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;zs1afgu28nemdza4exykhvp24d6jxja85jg44gu8k7xwusr5p09yery922nfn228hvagc33x5wkd4h&#34;</span>,
        <span style=color:#a6e22e>address_index</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>
    })
})
</code></pre></div><h2 id=list-all-accounts-and-balances>List all accounts and balances</h2>
<div class="notices warning"><p><code>walletd</code> does not consider <em>outgoing</em> transactions. It is designed to
handle incoming <strong>PAYMENTS</strong>. Therefore if you spend from these accounts,
the balance will be over-estimated.</p>
</div>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#34;list accounts&#34;</span>, <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> () {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>rep</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>chakram</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;http://localhost:8000/get_accounts&#39;</span>, {})
    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>rep</span>).<span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>have</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>200</span>)
    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>rep</span>.<span style=color:#a6e22e>body</span>).<span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>deep</span>.<span style=color:#a6e22e>equal</span>({
        <span style=color:#e6db74>&#34;subaddress_accounts&#34;</span><span style=color:#f92672>:</span> [
            {
                <span style=color:#e6db74>&#34;account_index&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
                <span style=color:#e6db74>&#34;balance&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>99500000</span>,
                <span style=color:#e6db74>&#34;base_address&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;zs1xflcmxuagwwn969htsej4mn3nuk7e3eeu3en4n4hkxajnqgmx5jsw0sa4p0r2ymqewf2ufefkfm&#34;</span>,
                <span style=color:#e6db74>&#34;label&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span>,
                <span style=color:#e6db74>&#34;tag&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span>,
                <span style=color:#e6db74>&#34;unlocked_balance&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>99500000</span>
            }
        ],
        <span style=color:#e6db74>&#34;total_balance&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>99500000</span>,
        <span style=color:#e6db74>&#34;total_unlocked_balance&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>99500000</span>
    })
})
</code></pre></div>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/pirate-btcpay/api/ title=API> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/pirate-btcpay/api/status/ title="Server Status" style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/pirate-btcpay/js/clipboard.min.js?1655562048></script>
<script src=/pirate-btcpay/js/perfect-scrollbar.min.js?1655562048></script>
<script src=/pirate-btcpay/js/perfect-scrollbar.jquery.min.js?1655562048></script>
<script src=/pirate-btcpay/js/jquery.sticky.js?1655562048></script>
<script src=/pirate-btcpay/js/featherlight.min.js?1655562048></script>
<script src=/pirate-btcpay/js/highlight.pack.js?1655562048></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/pirate-btcpay/js/modernizr.custom-3.6.0.js?1655562048></script>
<script src=/pirate-btcpay/js/learn.js?1655562048></script>
<script src=/pirate-btcpay/js/hugo-learn.js?1655562048></script>
<script src=/pirate-btcpay/mermaid/mermaid.js?1655562048></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
</body>
</html>